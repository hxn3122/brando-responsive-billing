<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Users • {{ company_name }}</title>
<link href="https://unpkg.com/modern-css-reset/dist/reset.min.css" rel="stylesheet"/>
<style>
  body{font-family: ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial; background:#f5f7fb; color:#111;}
  .wrap{max-width: 980px; margin: 32px auto; background:#fff; padding:24px; border-radius:16px; box-shadow: 0 10px 30px rgba(0,0,0,.06);}
  table{width:100%; border-collapse: collapse; margin-top:10px;}
  th, td{padding:10px 8px; border-bottom: 1px solid #e5e7eb;}
  th{background:#0B3D91; color:#fff; text-align:left;}
  input{width:100%; padding:10px 12px; border:1px solid #ddd; border-radius:10px;}
  .grid{display:grid; grid-template-columns: 1fr 1fr 1fr 1fr 1fr; gap:10px;}
  button{padding:10px 14px; border:none; border-radius:12px; cursor:pointer; font-weight:700; background:#1F6FEB; color:#fff;}
  a.btn{padding:8px 12px; border-radius:10px; background:#111; color:#fff; text-decoration:none; font-weight:700}
  .top{display:flex; justify-content:space-between; align-items:center}
</style>
<link href="/static/app.css" rel="stylesheet"/></head>
<body>
<div class="wrap">
<div class="top">
<h2>Manage Users</h2>
<div>
<a class="btn" href="/">← Back</a>
<a class="btn" href="/logout" style="background:#c0392b;margin-left:8px">Logout</a>
</div>
</div>
<h3>Add User</h3>
<form method="POST">
<div class="grid">
<div><input name="name" placeholder="Full name" required=""/></div>
<div><input name="username" placeholder="username" required=""/></div>
<div><input name="password" placeholder="password" required=""/></div>
<div><input name="start_from" placeholder="Start invoice from (e.g., 5001)" required="" type="number"/></div>
<div style="display:flex; align-items:center; gap:6px">
<label><input name="is_admin" type="checkbox"/> Admin</label>
</div>
</div>
<div style="margin-top:10px"><button type="submit">Add User</button></div>
</form>
<h3 style="margin-top:18px">Existing Users</h3>
<table>
<thead><tr><th>Name</th><th>Username</th><th>Role</th><th>Next Invoice #</th><th>Actions</th><th>Status</th></tr></thead>
<tbody>
        {% for u in users %}
        <tr>
<td>{{ u.name }}</td>
<td>{{ u.username }}</td>
<td>{{ "Admin" if u.is_admin else "User" }}</td>
<td>{{ u.next_number }}</td>
<td>
<form method="POST" onsubmit="return confirm('Delete user {{ u.username }}?')">
<input name="action" type="hidden" value="delete"/>
<input name="del_username" type="hidden" value="{{ u.username }}"/>
<a class="btn" href="/admin/user/{{ u.username }}" style="background:#1f6feb;margin-right:6px">Edit</a>
<button style="background:#c0392b" type="submit">Delete</button>
</form>
</td>
<td>{{ "Active" if u.is_active else "Disabled" }}</td>
</tr>
        {% endfor %}
      </tbody>
</table>
</div>
</body>
</html>